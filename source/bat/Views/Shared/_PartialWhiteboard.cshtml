@model bat.logic.ViewModels.Partials.IPartialWhiteboard
<div class="board-container">
    <script>
        $(function () {
            $("ul.dropdown-menu").on("click", "[data-keepOpenOnClick]", function (e) {
                e.stopPropagation();
            });
        });
    </script>

    <div id="board-wrap">
        <input id="getChatHistoryPath" type="hidden" value="@Url.HttpRouteUrl("api/chat/gethistory", new { controller = "ChatApi", action = "GetChatHistory" })" />
        <div id="board-top">
            <div class="fleft">
                <div class="btn-group">
                    <button onclick="defaultBoard()" type="button" class="btn btn-primary" data-toggle="tooltip" title="New Board">
                        <i class="fa fa-file-text-o" aria-hidden="true"></i> &nbsp; New
                    </button>
                    <button onclick="saveCanvas()" type="button" class="btn btn-primary" data-toggle="tooltip" title="Save Board">
                        <i class="fa fa-floppy-o" aria-hidden="true"></i> &nbsp; Save
                    </button>

                    @*<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">File <span class="caret"></span></button>
                    <ul class="dropdown-menu file-menu" role="menu">
                        <li>
                            <label style="max-width: inherit;" for="pdfData" data-toggle="tooltip" title="Upload Image or PDF" class="btn btn-primary">
                                <i class="fa fa-upload" aria-hidden="true"></i>
                            </label>
                            <input type="file" style="display:none" name="data" id="pdfData" />
                        </li>
                        <li class="divider"></li>
                        <li>
                            <h4 class="center no-margin">Load an image:</h4>
                            <div id="attachment-list" class="center">
                                @foreach (var attachment in Model.attachments)
                                {
                                    <button class="btn btn-link btn-block" onclick="loadImg('@attachment.ID')">
                                        @attachment.Title
                                    </button>
                                }
                            </div>
                        </li>
                    </ul>*@
                </div>
            </div>
            <div class="fright">
                <label for="lWSlider">Line Width:</label>
                <input type="range" id="lWSlider" class="bb-slider" onchange="changeLW(lWSlider.value)" value="3" min="1" max="5" />
                <label for="lWSlider">Chalk Colour:</label>
                <input name="chalkColor" id="chalkColor" type="color" onchange="changeColor(chalkColor.value)" />
            </div>
        </div>
        <div id="board-inner">
            <div id="blackBoard">
                <canvas id="canvas" style="align-content:center"></canvas>
            </div>
        </div>
    </div><!-- /board-wrap-->
    <div class="shadow2"><img style="width:100%" src="@Url.Content("~/assets/img/shadow.png")"></div>

    <!-- Modal -->
    <div class="modal fade" id="previewModal" tabindex="-1" role="dialog" aria-labelledby="previewModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <div class="form-group">
                        <input type="text" class="modal-title form-control" id="previewTitle">
                    </div>
                </div>
                <div class="modal-body">
                    <div id="pdfContainer" style="width:100%;">
                        <canvas id="previewCanvas"></canvas>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="savePreview('@Model.lesson.ID')">Upload Image</button>
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/Scripts/jquery.signalR-2.2.0.min.js")
@Scripts.Render("~/signalr/hubs")
@Scripts.Render("~/assets/vendor/pdf.js/build/pdf.js")
@Scripts.Render("~/assets/vendor/jQuery-slimScroll-1.3.8/jquery.slimscroll.min.js")
@Scripts.Render("~/assets/js/blackboard.js")